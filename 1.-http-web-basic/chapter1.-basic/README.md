# Chapter1. HTTP 개론

## 1장 HTTP 개관

이번 장에서는 아래의 내용에 대해서 하나씩 알아보겠습니다.

1. 얼마나 많은 클라이언트와 서버가 통신을 하는지
2. 리소스 \(웹 콘텐츠\)가 어디서 오는지
3. 웹 트랙잭션이 어떻게 동작 하는지
4. HTTP 통신을 위해 사용 되는 메시지의 형식
5. HTTP 기저의 TCP 네트워크 전송
6. 여러 종류의 HTTP 프로토콜
7. 인터넷 곳곳에 설치된 다양한 HTTP 구성 요소



### 웹 클라이언트와 서버

웹 콘텐츠는 웹 서버에 존재합니다.  
웹 서버는 `HTTP 프로토콜` 을 통해 클라이언트와 데이터를 주고받기 때문에   
보통 `HTTP 서버` 라고 부릅니다.  
  
이렇게 `HTTP 프로토콜`은 웹 클라이언트와 서버로 이루어져 있습니다.   
웹 클라이언트는 서버에게 요청과 함께 리소스를 요구하며 서버는 이에 대한 응답을 합니다.  
  
그렇다면 `리소스` 는 무엇일까요? 🧐



### 리소스

`리소스` 는 웹 서버에서 관리되는 웹 컨텐츠의 원천입니다.  
`HTML 파일, 이미지, 동영상` 등 모두 리소스라고 할 수 있습니다.  
리소스는 반드시 정적 파일일 필요는 없으며 동적으로 생성될 수 있습니다.

이렇게 다양한 리소스들은 `HTTP` 는 어떻게 관리하고 있는 것 일까요? 

이는 바로 `MIME 타입` 이라고 하는 것을 통해 가능합니다 😄

#### MIME 타입

`MIME 타입` 은 HTTP 에서 수천 가지의 데이터 타입을 다루기 위한 식별자입니다.  
웹 서버는 모든 HTTP 객체 데이터에 `MIME 타입` 을 붙여서 식별합니다.  
`MIME 타입` 의 예시는 다음과 같습니다.

* text/html \(HTML 로 작성된 문서\)
* text/plain \(plain ASCII 텍스트 문서\)
* image/jpeg \(JPEG 이미지\)

### URI

웹 서버 리소스는 각자 이름을 가지고 있기 때문에   
`URI` 라는 통합 자원 식별자를 통해 지목할 수 있습니다.  
`URI` 는 `URL` 과 `URN` 이 있으며 바로 이 둘의 차이점에 대해서 알아보겠습니다.

#### URL

`URL` 은 `통합 자원 지시자` 라고 불리며 가장 흔한 형태의 리소스 식별자입니다.  
사실 오늘날 대부분의 `URI` 는 `URL` 의 형태를 가지고 있습니다.  
다음은 `URL` 의 예시입니다.  
  
`http://www.naver.com/images/logo.jpg`  
  
위는 네이버의 로고 이미지를 가리키는 `URL` 의 예시입니다.  
이렇게 `URL` 은 `스킴` , `호스트` , `리소스 위치` 로 구성되며 각각의 역할은 다음과 같습니다.  
  
`스킴` : 리소스에 접근하기 위해 사용되는 프로토콜을 명시합니다.  
`호스트` : 리소스를 제공하는 서버의 주소를 나타냅니다.  
`리소스 위치` : 서버의 리소스 위치를 가리킵니다.  


#### URN

`URI` 의 두 번째 형태는 `URN` 입니다.  
`URN` 은 `URL` 의 한계를 극복하기 위해 개발된 것입니다.  
  
`URN` 은 한 리소스에 대해 해당 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 합니다.  
`URL` 의 경우 자원의 위치가 바뀌면 더 이상 해당 `URL` 은 사용할 수 없게 됩니다 😭  
  
`URN` 은 아직 실험적인 것이지만 전망이 밝은 것은 분명한 사실입니다.  
하지만 아직 여러 인프라 문제 때문에 채택이 늦어지고 있는 상황입니다.



### HTTP 트랜잭션

`HTTP 트랜잭션` 은 웹 서버와 클라이언트가 리소스를 주고 받는 과정을 의미합니다.  
`요청` 과 `응답` 으로 구성되어 있으며 이는 `HTTP 메시지` 를 통해 이루어집니다.

이러한 메시지들은 `HTTP 메서드` 와 `상태 코드` 를 통해 어떻게 전달되고 있는지 파악 가능합니다.

#### HTTP 메서드

`HTTP 메서드` 는 서버에게 어떤 동작을 취해야 하는지 알려줍니다.  
대표적으로 `GET, POST, PUT, DELETE, HEAD` 등이 있습니다.

#### 상태 코드

`상태 코드` 는 `HTTP 응답 메시지` 에서 사용되며 클라이언트에게 요청의 상태를 알려줍니다.  
`200, 302, 404` 등이 있으며 대부분 상태를 설명해주는 `사유 구절` 과 함께 전달됩니다.  
`사유 구절` 은 단순히 사람을 위한 것이므로 실제 응답 처리는 앞선 `상태 코드` 를 통해 이루어집니다.

{% hint style="success" %}
시각적으로 풍부한 웹 페이지는 여러 객체\(이미지, 동영상, 뼈대 HTML ...\) 등으로   
이루어져 있기 때문에 대량의 HTTP 트랜잭션이 발생할 수 있습니다!
{% endhint %}



### HTTP 메시지

`HTTP 메시지` 는 단순한 줄 단위 문자열로 이루어져 있습니다.  
`클라이언트 -> 서버` 는 `요청 메시지` 이며 그 반대는 `응답 메시지` 라고 합니다.  
`HTTP 메시지` 는 크게 세 가자로 이루어져 있습니다.

#### 시작줄

메시지의 첫 줄은 시작줄이며 어떤 요청 혹은 응답인지 나타냅니다.

#### 헤더

헤더는 `:` 으로 구분되어 있는 0개 이상의 필드가 옵니다.

#### 본문

본문은 필요에 따라 사용하며 문자열이며 구조적인 `시작줄` 과 `헤더` 와 달리   
임의의 이진 데이터\(비디오, 이미지 등등\)가 올 수 있습니다. \(물론 텍스트 데이터도 가능!\)



### TCP 버전

그럼 HTTP의 메시지는 어떻게 전달되는 걸까요?  
`편지`를 쓰고 전달을 한다고 생각해봅시다. 편지는 이미 쓰인 상태고 그걸 전달하기만 하면 된다면, 사람이 직접 움직일 필요가 없습니다. 만약 그럴 거라면 차라리 직접 말하러 가는 게 낫겠어요. 그러면 편지를 쓰는 의미가 없겠죠? 편지를 쓴 사람이 직접 전달하러 갈 필요는 없습니다. 편지를 썼다면, 이제 `우체부`님께서 차를 타고 이곳 저곳 `도로`를 옮겨 다니시며 정해진 사람에게 전해 주실 겁니다.

이제 이 비유를 다시 들여다 볼까요?

편지는 `HTTP 메시지`입니다. 거기에는 받아야 할 사람의 주소가 적혀 있습니다. 바로 `IP 주소와 포트번호`입니다. 우체부님은 TCP 프로토콜이라는 `도로` 위를 운전해서 해당 주소의 사람에게 갈 겁니다. 아이피 주소랑 `포트 번호`가 뭐가 다르냐고요? 아이피 주소가 집이라면 포트 번호는 `호실`에 해당한다고 볼 수 있습니다. 우체부님은 택배 기사와 달리, 우편함에 편지를 넣어주면 됩니다. 포트 번호에 맞는 곳에 넣어주실 겁니다. 편지를 전해주면 상대방이 또 답신을 해줄지도 모르죠. 그러면 우체부님은 그 답신을 같은 방식으로 가지고 와주실 겁니다.

보내는 쪽과 돌려주는 쪽이 같은 방식으로 편지를 주고 받는 중인 거죠.

근데 우리가 언제 이런 일을 하고 있다는 걸까요? 사실 우리는 웹 브라우저라는 `우체부`님을 통해 편지를 보냅니다. 말 그대로 주소 창에 주소를 적고 그걸 보냅니다! 우리가 좌표로 편지를 보낼 수는 없으니 도로명 주소나 지번 번호를 적기만 하면 됩니다, 우리는 그걸 `도메인`이라고 부르죠.

여기까지 왔다면 끝입니다! 이제 우체부님이 편지를 대신 전달해주시겠죠?

TCP 프로토콜은 `전송 제어 프로토콜`입니다. TCP는 엄격한 규칙에 따라 움직여서 다른 프로토콜보단 느리지만, 중간에 편지가 훼손되거나 잃어버리는 일 없이 제 때 보내줄 수가 있습니다.

#### 

### 프로토콜 버전

HTTP/0.9 : 오직 GET 메서드만 지원, HTML 객체를 받기 위한 용도였지만 금방 1.0 VER로 대체되었습니다.  
HTTP/1.0 : 웹페이지와 상호작용하기 위한 다양한 기능이 추가되었으나, 잘 정의되지 않은, 용례들의 모음에 가깝습니다.  
HTTP/1.0+ : 비공식적으로나마 keep-alive 커넥션, 가상 호스팅, 프락시 연결 지원 등이 사실 상 표준으로 추가되었습니다.  
**HTTP/1.1** : HTTP의 설계 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거에 초점을 맞춰져 있습니다. 현재 사용되고 있는 Version입니다.  
**HTTP/2.0** : 구글의 SPDY 프로토콜 기반으로 설계가 진행 중인 프로토콜입니다.



### 웹의 구성 요소

* `프락시`는 클라이언트와 서버 사이에 위치한 HTTP 중계 서버입니다.
* `캐시`는 자주 찾는 것의 사본을 저장해두는 HTTP 프락시 서버입니다.
* `게이트웨이`는 다른 서버들 사이에서 중개자 역할을 하는 특별한 서버입니다.
* 터널은 두 커넥션 사이에서 날\(raw\) 데이터를, 열어보지 않고 전달하는 HTTP 애플리케이션입니다.
* 에이전트는 HTTP 요청을 직접 만드는 프로그램을 칭합니다. 브라우저도 에이전트겠군요.



